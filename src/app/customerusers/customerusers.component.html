<aside id="left-panel" class="left-panel">
  <navbar-aside></navbar-aside>

</aside>
<!-- /#left-panel -->


<div id="right-panel" class="right-panel">
  <header-dashboard></header-dashboard>

  <div class="breadcrumbs">
    <div class="col-sm-6">
      <div class="page-header float-left">
        <div class="page-title">
          <h1>Usuarios internos de
            <b>{{nameUSer}}</b>
          </h1>

        </div>
      </div>
    </div>

    <div class="col-sm-6">
      <div class="page-header float-right">
        <div class="page-title">
          <ol class="breadcrumb text-right">
            <li>
              <a routerLink="/Dashboard">Dashboard</a>
            </li>
            <li>
              <a>Usuarios</a>
            </li>
            <li class="">
              <a routerLink="/Dashboard/customers">Clientes</a>

            </li>
            <li class="active">
              <a>Usuarios Internos</a>

            </li>
          </ol>
        </div>
      </div>
    </div>
  </div>

  <div class="content mt-3" style="min-height:81vh;">

    <div class=" text-center loading-panel" [hidden]="!loadingMore">
      <div class="dot dot-1"></div>
      <div class="dot dot-2"></div>
      <div class="dot dot-3"></div>

      <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
        <defs>
          <filter id="goo">
            <feGaussianBlur in="SourceGraphic" stdDeviation="11" result="blur" />
            <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 21 -7" />
          </filter>
        </defs>
      </svg>

    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-2">
          <div class="card">
            <div class="card-header">
              Saldos
            </div>
            <ul class="list-group list-group-flush ">
              <li class="list-group-item">
                <img src="../assets/images/mi-personal.png" width="50" class="img-fluid" alt="Plan Mi Personal de Confianza">
                <span class="float-right mt-3">
                  <h5 class="m-0">122</h5>
                </span>
              </li>
              <li class="list-group-item">
                <img src="../assets/images/mi-negocio.png" width="50" class="img-fluid" alt="Plan Mi Negocio de Confianza">
                <span class="float-right mt-3">
                  <h5 class="m-0">12</h5>
                </span>
              </li>
              <li class="list-group-item">
                <img src="../assets/images/mi-personal-corporativo.png" width="50" class="img-fluid" alt="Plan Corporativo Mi Personal de Confianza">
                <span class="float-right mt-3">
                  <h5 class="m-0">0</h5>
                </span>
              </li>
            </ul>
          </div>
          <div class="row text-center">
            <div class="col-md-12 mb-2">
              <button class="btn btn-success w-100">Nuevo Saldo</button>
            </div>
            <div class="col-md-12">
              <button class="btn btn-primary w-100" [hidden]="addNewuser" (click)='this.addNewuser=true'>Nuevo Usuario</button>
            </div>
          </div>


        </div>
        <div class="col-md-10 ListAdminsAll p-3  text-center" [hidden]="loadingMore || addNewuser">
          <div [hidden]="invocesPayment==null">
            <table datatable [dtOptions]="dtOptions" class="row-border hover">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Cargo</th>
                  <th>Email</th>
                  <th>Creado</th>
                  <th>Saldos</th>
                  <th>Acciones</th>

                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let user of invocesPayment">
                  <td>{{ user.nombre }}</td>
                  <td>{{ user.cargo }}</td>
                  <td>{{ user.email }}</td>
                  <td>{{ user.fecha }}</td>
                  <td>
                    <button class='btn btn-secondary'>Ver</button>
                  </td>
                  <td class="font-weight-bold">
                    <i class="fa fa-edit pointer" aria-hidden="true" title="Editar"></i>&nbsp;
                    <i class="ti-trash text-danger pointer" title="Eliminar" aria-hidden="true"></i>&nbsp;
                    <i class="fa fa-plus-square text-success pointer" title="Añadir Saldo"></i>

                  </td>

                </tr>
              </tbody>
            </table>
          </div>

          <div class="col-md-12 border-right border-left mt-5 mb-5 display-table text-center" *ngIf="invocesPayment==null">
            <div class="display-middle">
              <i class="display-fa-error fa fa-exclamation-triangle "></i>
              <h4 class="upper mt-2">{{messageErrorQuery}}</h4>
            </div>
          </div>
        </div>
        <div class="col-md-10 ListAdminsAll p-5  bg-white " [hidden]="!addNewuser">
          <form #newCompanyCustomer="ngForm" (ngSubmit)="( !NotEqualsPassword && (PowerPassword!='Débil' && PowerPassword!='' && PowerPassword!=null) ) && onSubmitNewCustomerCompany(newCompanyCustomer)">
            <div class="row">
              <div class="col-md-4 ">
                <h4>Nuevo Usuario</h4>

                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label class=" form-control-label">Nombre Completo</label>

                      <input type="text" #nombre="ngModel" ngModel name="nombre" class="form-control" [ngClass]="{'is-invalid':newCompanyCustomer.submitted && nombre.invalid }"
                        required>
                      <div *ngIf="newCompanyCustomer.submitted && nombre.invalid">
                        <small class="form-text text-danger">Nombre Requerido</small>
                      </div>

                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label class=" form-control-label">Cargo en la empresa</label>

                      <input type="text" #cargo="ngModel" ngModel name="cargo" class="form-control" [ngClass]="{'is-invalid':newCompanyCustomer.submitted && cargp.invalid }"
                        required>
                      <div *ngIf="newCompanyCustomer.submitted && cargo.invalid">
                        <small class="form-text text-danger">*Cargo Requerido</small>
                      </div>

                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-12">
                    <div class=" form-group">
                      <label class=" form-control-label">Correo electrónico</label>
                      <input type="email" name="mail" #mail="ngModel" ngModel [ngClass]="{'is-invalid': ( newCompanyCustomer.submitted && mail.invalid) }"
                        placeholder="...." class="form-control" required email>
                      <div *ngIf="newCompanyCustomer.submitted &&  mail.invalid">
                        <small class="form-text text-danger" *ngIf="mail.errors.required">Correo electrónico requerido</small>
                        <small class="form-text text-danger" *ngIf="mail.errors.email">Correo electrónico inválido</small>
                      </div>
                      <small *ngIf="ExistUser" class="form-text text-danger">
                        Ya está registrado un usuario con este correo electrónico
                      </small>
                    </div>
                  </div>
                </div>


              </div>
              <div class="col-md-4">
                <h4>Datos de Sesión</h4>
                <div class="row">

                  <div class="col-md-12">
                    <label class=" form-control-label">Contraseña</label>
                    <div class=" form-group">
                      <div class="input-group">
                        <input type="password" name="password1" #password1="ngModel" ngModel (keyup)="ValidatePasswordPower($event);validatePasswordRepeat($event,passwordRepeat1)"
                          [ngClass]="{'is-invalid': (newCompanyCustomer.submitted && password1.invalid),'border border-danger': PowerPassword=='Débil','border border-warning': PowerPassword=='Aceptable','is-valid': PowerPassword=='Fuerte','border-none':password1.value=='' && !PowerPassword }"
                          (keydown)="disabledPassErr()" placeholder="******" class="form-control" required>
                        <div class="input-group-addon" [ngClass]="{'is-invalid': (newCompanyCustomer.submitted && password1.invalid),'border border-danger': PowerPassword=='Débil','border border-warning': PowerPassword=='Aceptable','border border-success': PowerPassword=='Fuerte'}">
                          <i class="fa" [ngClass]="{'fa-times': (newCompanyCustomer.submitted && password1.invalid),'fa-times': PowerPassword=='Débil','fa-check': PowerPassword=='Fuerte' || PowerPassword=='Aceptable', 'fa-asterisk':password1.value=='' }"></i>
                        </div>
                      </div>
                      <small class="form-text font-weight-bold" *ngIf="password1.valid" [ngClass]="{'text-danger': PowerPassword=='Débil','text-warning': PowerPassword=='Aceptable','text-success': PowerPassword=='Fuerte'}">{{PowerPassword}}</small>
                      <div *ngIf="newCompanyCustomer.submitted && password1.invalid">
                        <small class="form-text text-danger" *ngIf="password1.errors.required">Contraseña Requerida</small>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">

                  <div class="col-md-12">
                    <label class=" form-control-label">Repetir Contraseña</label>

                    <div class=" form-group">
                      <div class="input-group">
                        <input type="password" name="passwordRepeat1" #passwordRepeat1="ngModel" ngModel (keyup)="validatePasswordRepeat($event,password1)"
                          [ngClass]="{'is-invalid': (newCompanyCustomer.submitted && passwordRepeat1.invalid) || NotEqualsPassword  }"
                          placeholder="******" class="form-control" required>
                        <div class="input-group-addon" [ngClass]="{'border border-danger':NotEqualsPassword,'border border-success': (!NotEqualsPassword && passwordRepeat1.value!='' )  }">
                          <i class="fa fa-asterisk" [ngClass]="{'fa-times':NotEqualsPassword,'fa-check': (!NotEqualsPassword && passwordRepeat1.value!=''), 'fa-asterisk':passwordRepeat1.value=='' }"></i>
                        </div>
                      </div>
                      <div *ngIf="newCompanyCustomer.submitted && passwordRepeat1.invalid">
                        <small class="form-text text-danger" *ngIf="passwordRepeat1.errors.required">Contraseña Requerida</small>
                      </div>
                      <small *ngIf="NotEqualsPassword" class="form-text text-danger">
                        Contraseñas no coinciden
                      </small>
                    </div>
                  </div>

                </div>
                <div class="row">
                  <div class="col-md-12">
                    <label class=" form-control-label">Estado</label>
                    <div class=" form-group">
                      <label class="switch switch-3d switch-success mr-3">

                        <input type="checkbox" id="checkmodusNew1" name="checkmodusNew" [ngModel]="checkedActivoUser" (change)="changeStatusCustomer()"
                          class="switch-input">
                        <span class="switch-label"></span>
                        <span class="switch-handle"></span>

                      </label> {{statusNewCustomer}}
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <h4>Asignación de Saldo</h4>
                <div class="row mb-2">
                  <div class="col-md-6">
                    Mi Personal de Confianza
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <input name="remitonumero" id="remitonumero" type="text" required class="form-control" placeholder="...">
                    </div>
                  </div>

                </div>
                <div class="row mb-2">
                  <div class="col-md-6">
                    Mi Negocio de Confianza
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <input name="remitonumero" id="remitonumero" type="text" required class="form-control" placeholder="...">
                    </div>
                  </div>

                </div>
                <div class="row mb-2">
                  <div class="col-md-6">
                    Plan Corporativo - Mi Personal de Confianza
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <input name="remitonumero" id="remitonumero" type="text" required class="form-control" placeholder="...">
                    </div>
                  </div>

                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12 text-center">
                <button class="btn btn-danger" (click)="this.addNewuser=false" type="submit">Cancelar
                  <i></i>
                </button> &nbsp; &nbsp;
                <button class="btn btn-success" type="submit">Guardar
                  <i></i>
                </button>
              </div>
            </div>

          </form>
        </div>
      </div>
    </div>



  </div>
</div>

<!-- /#right-panel -->